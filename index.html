<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Danville Poker Group</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="icon" type="image/png" href="assets/images/favicon-32x32.png">
</head>
<body>
    <!-- Left Navigation -->
    <nav class="left-nav" id="leftNav">
        <div class="nav-header">
            <img src="assets/images/dpg.png" alt="DPG Logo" class="nav-logo">
            <h2>Danville Poker</h2>
            <button class="nav-toggle" id="navToggle">
                <span></span>
                <span></span>
                <span></span>
            </button>
        </div>
        
        <div class="nav-content" id="navContent">
            <!-- Admin Info Badge (top of nav) -->
            <div id="adminInfo" class="admin-info" style="display: none;">
                <div class="admin-badge">
                    <span class="admin-icon">üë§</span>
                    <div class="admin-details">
                        <span class="admin-label">Logged in as</span>
                        <span id="adminEmail" class="admin-email"></span>
                    </div>
                </div>
            </div>
            <div class="nav-section">
                <h3>Public</h3>
                <ul>
                    <li><a href="#" data-page="home" class="nav-link active">
                        <span class="nav-icon">üè†</span>
                        <span class="nav-text">Home</span>
                    </a></li>
                    <li><a href="#" data-page="events" class="nav-link">
                        <span class="nav-icon">üìÖ</span>
                        <span class="nav-text">Events</span>
                    </a></li>
                    <li><a href="#" data-page="rsvp" class="nav-link">
                        <span class="nav-icon">‚úì</span>
                        <span class="nav-text">RSVP</span>
                    </a></li>
                    <li><a href="#" data-page="reports" class="nav-link">
                        <span class="nav-icon">üìä</span>
                        <span class="nav-text">Reports</span>
                    </a></li>
                    <li><a href="#" data-page="gallery" class="nav-link">
                        <span class="nav-icon">üì∏</span>
                        <span class="nav-text">Gallery</span>
                    </a></li>
                    <li><a href="#" data-page="how-to-host" class="nav-link">
                        <span class="nav-icon">üè†</span>
                        <span class="nav-text">How to Host</span>
                    </a></li>
                    <li><a href="#" data-page="poker-bylaws" class="nav-link">
                        <span class="nav-icon">‚öñÔ∏è</span>
                        <span class="nav-text">Poker Bylaws</span>
                    </a></li>
                </ul>
            </div>
            
            <div class="nav-section admin-section" id="adminNav" style="display: none;">
                <h3>Admin</h3>
                <ul>
                    <li><a href="#" data-page="admin-events" class="nav-link">
                        <span class="nav-icon">‚öôÔ∏è</span>
                        <span class="nav-text">Manage Events</span>
                    </a></li>
                    <li><a href="#" data-page="admin-members" class="nav-link">
                        <span class="nav-icon">üë•</span>
                        <span class="nav-text">Manage Members</span>
                    </a></li>
                    <li><a href="#" data-page="admin-gallery" class="nav-link">
                        <span class="nav-icon">üñºÔ∏è</span>
                        <span class="nav-text">Manage Gallery</span>
                    </a></li>
                    <li><a href="#" data-page="admin-polls" class="nav-link">
                        <span class="nav-icon">üìä</span>
                        <span class="nav-text">Manage Polls</span>
                    </a></li>
                </ul>
            </div>
            
            <div class="nav-footer">
                <button id="authButton" class="auth-button">Admin Login</button>
            </div>
        </div>
    </nav>

    <!-- Main Content -->
    <main class="main-content" id="mainContent">
        <div class="content-container">
            <!-- Home Page -->
            <div id="home-page" class="page active">
                <h1>Welcome to Danville Poker Group</h1>
                <div class="welcome-card">
                    <img src="assets/images/dpg.png" alt="DPG Logo" class="welcome-logo">
                    <p>Welcome to the official website for the Danville Poker Group. We're a group of friends who meet monthly for poker nights in the Easy Bay area.</p>
                    
                    <div class="quick-links">
                        <a href="#" data-page="events" class="quick-link-card">
                            <span class="quick-link-icon">üìÖ</span>
                            <h3>Upcoming Events</h3>
                            <p>View the schedule</p>
                        </a>
                        <a href="#" data-page="rsvp" class="quick-link-card">
                            <span class="quick-link-icon">‚úì</span>
                            <h3>RSVP</h3>
                            <p>Respond to events</p>
                        </a>
                        <a href="#" data-page="gallery" class="quick-link-card">
                            <span class="quick-link-icon">üì∏</span>
                            <h3>Photo Gallery</h3>
                            <p>View memories</p>
                        </a>
                        <a href="#" data-page="reports" class="quick-link-card">
                            <span class="quick-link-icon">üìä</span>
                            <h3>Reports</h3>
                            <p>Stats & history</p>
                        </a>
                    </div>
                </div>
            </div>

            <!-- Events Page -->
            <div id="events-page" class="page">
                <h1>Upcoming Events</h1>
                <div id="eventsContainer" class="events-container">
                    <div class="loading">Loading events...</div>
                </div>
            </div>

            <!-- RSVP Page -->
            <div id="rsvp-page" class="page">
                <h1>RSVP to Event</h1>
                <div class="rsvp-container">
                    <div class="card">
                        <h2>Select Event</h2>
                        <select id="rsvpEventSelect" class="form-select">
                            <option value="">Select an event...</option>
                        </select>
                        
                        <div id="rsvpEventDetails" style="display: none;">
                            <div class="event-info">
                                <p><strong>Date:</strong> <span id="rsvpEventDate"></span></p>
                                <p><strong>Host:</strong> <span id="rsvpEventHost"></span></p>
                                <p><strong>Location:</strong> <span id="rsvpEventLocation"></span></p>
                            </div>
                            
                            <h3>Your Information</h3>
                            <select id="rsvpMemberSelect" class="form-select">
                                <option value="">Select your name...</option>
                            </select>
                            
                            <div id="memberImageContainer" style="display: none; text-align: center; margin: 20px 0;">
                                <img id="rsvpMemberImage" src="" alt="Member" style="width: 150px; height: 150px; border-radius: 50%; object-fit: cover;">
                            </div>
                            
                            <div id="rsvpStatusContainer" style="display: none;">
                                <h3>Your Response</h3>
                                <select id="rsvpStatus" class="form-select">
                                    <option value="">Select your response...</option>
                                    <option value="attending">‚úì Attending</option>
                                    <option value="not-attending">‚úó Not Attending</option>
                                    <option value="maybe">? Maybe</option>
                                </select>
                                
                                <button id="submitRsvpBtn" class="btn btn-primary">Submit RSVP</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Reports Page -->
            <div id="reports-page" class="page">
                <h1>Reports & Statistics</h1>
                <p class="page-subtitle">View attendance records, hosting history, and event statistics</p>
                <div class="reports-container">
                    <div class="report-cards-grid">
                        <div class="report-card" onclick="showAttendanceReport()">
                            <div class="report-card-icon">üìä</div>
                            <h3>Past 12 Months</h3>
                            <p>Recent attendance trends and performance awards</p>
                            <span class="report-card-action">View Report ‚Üí</span>
                        </div>
                        
                        <div class="report-card" onclick="showAllTimeAttendanceReport()">
                            <div class="report-card-icon">üèÜ</div>
                            <h3>All Time Attendance</h3>
                            <p>Complete attendance history since January 2024</p>
                            <span class="report-card-action">View Report ‚Üí</span>
                        </div>
                        
                        <div class="report-card" onclick="showHostingReport()">
                            <div class="report-card-icon">üè†</div>
                            <h3>Hosting Report</h3>
                            <p>Event hosting breakdown by member and year</p>
                            <span class="report-card-action">View Report ‚Üí</span>
                        </div>
                        
                        <div class="report-card" onclick="showPastEventsReport()">
                            <div class="report-card-icon">üìÖ</div>
                            <h3>Past Events</h3>
                            <p>Historical event list with attendance details</p>
                            <span class="report-card-action">View Report ‚Üí</span>
                        </div>
                    </div>
                    <div id="reportOutput" class="report-output"></div>
                </div>
            </div>

            <!-- How to Host Page -->
            <div id="how-to-host-page" class="page">
                <h1>Hosting Playbook</h1>
                <p class="page-subtitle">Everything you need to host a great Danville Poker Group night</p>
                
                <div class="hosting-guide">
                    <div class="guide-section" style="background: linear-gradient(135deg, var(--primary-color) 0%, var(--secondary-color) 100%); color: white; text-align: center; padding: 40px;">
                        <h2 style="color: white; border: none; padding: 0; margin: 0 0 10px 0;">‚è∞ Start Time: 7:00 PM PT</h2>
                        <p style="margin: 0; font-size: 1.1rem;">Dessert served between 10:00-10:30 PM</p>
                    </div>
                    
                    <div class="guide-section">
                        <div class="guide-header">
                            <span class="guide-icon">üéØ</span>
                            <h2>The Essentials</h2>
                        </div>
                        <div class="guide-content">
                            <div class="two-column-list">
                                <div>
                                    <ul>
                                        <li>Plates</li>
                                        <li>Bowls</li>
                                        <li>Forks</li>
                                        <li>Knives</li>
                                        <li>Spoons</li>
                                        <li>Napkins</li>
                                        <li>Solo Cups</li>
                                    </ul>
                                </div>
                                <div>
                                    <ul>
                                        <li>Serving Tables</li>
                                        <li>Trash Can(s)</li>
                                        <li>Poker Tables</li>
                                        <li>Poker Chairs</li>
                                        <li>Poker Chips</li>
                                        <li>Two Decks of Cards</li>
                                        <li>Music</li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="guide-section">
                        <div class="guide-header">
                            <span class="guide-icon">üçï</span>
                            <h2>Food</h2>
                        </div>
                        <div class="guide-content">
                            <div class="two-column-list">
                                <div>
                                    <ul>
                                        <li><strong>Main Dish</strong></li>
                                        <li>Sides</li>
                                        <li>Two Flavors of Ice Cream<br><span style="font-size: 0.9em; color: var(--text-muted);">- Vanilla required</span></li>
                                        <li>Cookies or Brownies</li>
                                        <li>Dessert Cake (optional)</li>
                                    </ul>
                                </div>
                                <div>
                                    <ul>
                                        <li>M & M (plain and peanut)</li>
                                        <li>Mixed Nuts</li>
                                        <li>Chips</li>
                                        <li>Pretzels</li>
                                        <li>Red Vines</li>
                                        <li>Lollipops (Sees or Tootsie)</li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="guide-section">
                        <div class="guide-header">
                            <span class="guide-icon">üç∫</span>
                            <h2>Bar</h2>
                        </div>
                        <div class="guide-content">
                            <div class="two-column-list">
                                <div>
                                    <ul>
                                        <li>Ice</li>
                                        <li>Beer (2 kinds)</li>
                                        <li>Vodka</li>
                                        <li>Tequila</li>
                                        <li>Whiskey</li>
                                    </ul>
                                </div>
                                <div>
                                    <ul>
                                        <li>Cranberry Juice</li>
                                        <li>Lemon, Lime, Oranges</li>
                                        <li>Red Bull (Diet, Regular)</li>
                                        <li>Club Soda & Tonic</li>
                                        <li>Ginger Beer, Coke, Diet Coke</li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="guide-section">
                        <div class="guide-header">
                            <span class="guide-icon">üéµ</span>
                            <h2>Music</h2>
                        </div>
                        <div class="guide-content">
                            <p>Background music helps set the atmosphere! Keep the volume at a level where conversation is easy. Consider:</p>
                            <ul>
                                <li>Classic rock or jazz playlists</li>
                                <li>Low-key instrumental music</li>
                                <li>Avoid heavy bass or loud vocals</li>
                                <li>Spotify poker night playlists work great</li>
                            </ul>
                        </div>
                    </div>
                    
                    <div class="guide-footer">
                        <p><strong>üí° Pro Tips:</strong></p>
                        <ul style="text-align: left; max-width: 600px; margin: 10px auto 0;">
                            <li>Set up food and bar areas away from poker tables</li>
                            <li>Have trash cans easily accessible</li>
                            <li>Keep extra supplies handy (napkins, cups, ice)</li>
                            <li>Label drinks with permanent markers if needed</li>
                            <li>Start dessert service around 10:00-10:30 PM</li>
                        </ul>
                    </div>
                </div>
            </div>

            <!-- Poker Bylaws Page -->
            <div id="poker-bylaws-page" class="page">
                <h1>‚öñÔ∏è Official Danville Poker Group Bylaws</h1>
                <p class="page-subtitle">The sacred rules that govern our monthly gatherings (mostly)</p>
                
                <div class="bylaws-container">
                    <div class="bylaw-preamble">
                        <p><strong>We, the members of the Danville Poker Group,</strong> in order to form a more perfect poker night, establish snack justice, ensure domestic tranquility (at the table), provide for the common defense (against bad beats), promote the general welfare (of the chip leader), and secure the blessings of friendly competition to ourselves and our poker posterity, do ordain and establish these Bylaws.</p>
                    </div>
                    
                    <div class="bylaw-section">
                        <h2>Article I: General Provisions</h2>
                        <div class="bylaw-article">
                            <p><strong>Section 1.1</strong> - What happens at poker night stays at poker night (except for the photos we post everywhere).</p>
                            <p><strong>Section 1.2</strong> - The host reserves the right to make up house rules on the spot, especially when losing.</p>
                            <p><strong>Section 1.3</strong> - All bad beat stories must be limited to 90 seconds or less. Violators will be forced to listen to someone else's bad beat story.</p>
                        </div>
                    </div>
                    
                    <div class="bylaw-section">
                        <h2>Article II: Food & Beverage Rights</h2>
                        <div class="bylaw-article">
                            <p><strong>Section 2.1</strong> - The double-dipping of chips (tortilla, not poker) is strictly prohibited and punishable by public shaming.</p>
                            <p><strong>Section 2.2</strong> - Pizza must be ordered in quantities sufficient to feed a small army, regardless of actual attendance.</p>
                            <p><strong>Section 2.3</strong> - The last slice of pizza shall go to whoever is willing to engage in trial by combat (or rock-paper-scissors).</p>
                        </div>
                    </div>
                    
                    <div class="bylaw-section">
                        <h2>Article III: Gameplay Regulations</h2>
                        <div class="bylaw-article">
                            <p><strong>Section 3.1</strong> - Players must remain seated during hands unless nature calls, in which case nature always wins.</p>
                            <p><strong>Section 3.2</strong> - Sunglasses at the table are permitted but will result in immediate mockery.</p>
                            <p><strong>Section 3.3</strong> - String betting is forbidden, unless you're trying to be fancy and it backfires spectacularly.</p>
                            <p><strong>Section 3.4</strong> - The phrase "I'm due for a win" has no statistical validity but will be spoken anyway.</p>
                        </div>
                    </div>
                    
                    <div class="bylaw-section">
                        <h2>Article IV: Attendance & Punctuality</h2>
                        <div class="bylaw-article">
                            <p><strong>Section 4.1</strong> - RSVP "Maybe" actually means "No" until proven otherwise.</p>
                            <p><strong>Section 4.2</strong> - Arriving "on time" means within 30 minutes of the stated start time, give or take.</p>
                            <p><strong>Section 4.3</strong> - Last-minute cancellations are acceptable only in cases of: (a) emergency, (b) wife's orders, or (c) better poker game elsewhere (just kidding on that last one).</p>
                        </div>
                    </div>
                    
                    <div class="bylaw-section">
                        <h2>Article V: Technology & Phones</h2>
                        <div class="bylaw-article">
                            <p><strong>Section 5.1</strong> - Phone calls during play are permitted, but the player must go all-in first to prove they're not stalling.</p>
                            <p><strong>Section 5.2</strong> - Looking up poker odds on your phone is cheating, unless everyone else is doing it too.</p>
                            <p><strong>Section 5.3</strong> - Texting at the table is acceptable as long as you're not telling the other players what your cards are (we have suspicions).</p>
                        </div>
                    </div>
                    
                    <div class="bylaw-section">
                        <h2>Article VI: The Final Hand</h2>
                        <div class="bylaw-article">
                            <p><strong>Section 6.1</strong> - The person who says "just one more hand" is legally obligated to lose that hand.</p>
                            <p><strong>Section 6.2</strong> - Helping clean up is optional but greatly increases your chances of being invited back.</p>
                            <p><strong>Section 6.3</strong> - All members must affirm that they "had a great time" regardless of their finishing position in the money.</p>
                        </div>
                    </div>
                    
                    <div class="bylaws-footer">
                        <p>üìú <em>These bylaws are subject to change without notice, especially if they don't work in someone's favor.</em></p>
                        <p><strong>Ratified:</strong> Some time ago, probably<br>
                        <strong>Last Amended:</strong> Every poker night<br>
                        <strong>Enforcement:</strong> Selective</p>
                    </div>
                </div>
            </div>

            <!-- Gallery Page -->
            <div id="gallery-page" class="page">
                <h1>Photo Gallery</h1>
                <div id="galleryContainer" class="gallery-container">
                    <div class="gallery-grid" id="galleryGrid">
                        <p class="text-muted">Gallery coming soon! Photos will be added here.</p>
                    </div>
                </div>
            </div>

            <!-- Admin Pages -->
            <div id="admin-events-page" class="page admin-page">
                <h1>Manage Events</h1>
                <div class="admin-container">
                    <!-- Add Event -->
                    <div class="card">
                        <h2>Add New Event</h2>
                        <div class="form-group">
                            <label>Date</label>
                            <input type="date" id="newEventDate" class="form-input">
                        </div>
                        <div class="form-group">
                            <label>Host</label>
                            <select id="newEventHost" class="form-select">
                                <option value="">Select a host...</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label>Location</label>
                            <input type="text" id="newEventLocation" class="form-input" placeholder="Location">
                        </div>
                        <button class="btn btn-primary" onclick="addEvent()">Add Event</button>
                    </div>
                    
                    <!-- Edit Event -->
                    <div class="card">
                        <h2>Edit/Delete Event</h2>
                        <div class="form-group">
                            <label>Select Event</label>
                            <select id="editEventSelect" class="form-select">
                                <option value="">Select an event...</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label>Date</label>
                            <input type="date" id="editEventDate" class="form-input">
                        </div>
                        <div class="form-group">
                            <label>Host</label>
                            <select id="editEventHost" class="form-select">
                                <option value="">Select a host...</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label>Location</label>
                            <input type="text" id="editEventLocation" class="form-input">
                        </div>
                        <div class="button-group">
                            <button class="btn btn-primary" onclick="saveEventEdits()">Save Changes</button>
                            <button class="btn btn-danger" onclick="deleteEvent()">Delete Event</button>
                        </div>
                    </div>
                    
                    <!-- Event List with RSVPs -->
                    <div class="card">
                        <h2>Event RSVPs</h2>
                        <div id="adminEventsContainer"></div>
                    </div>
                </div>
            </div>

            <div id="admin-members-page" class="page admin-page">
                <h1>Manage Members</h1>
                <div class="admin-container">
                    <!-- Add/Edit Member -->
                    <div class="card">
                        <h2 id="memberFormTitle">Add New Member</h2>
                        <div class="form-group">
                            <label>Name</label>
                            <input type="text" id="memberName" class="form-input" placeholder="Full Name">
                        </div>
                        <div class="form-group">
                            <label>Email</label>
                            <input type="email" id="memberEmail" class="form-input" placeholder="email@example.com">
                        </div>
                        <div class="form-group">
                            <label>Phone</label>
                            <input type="tel" id="memberPhone" class="form-input" placeholder="(555) 555-5555">
                        </div>
                        <div class="form-group">
                            <label>Location</label>
                            <input type="text" id="memberLocation" class="form-input" placeholder="Address">
                        </div>
                        <button class="btn btn-primary" id="saveMemberBtn" onclick="addMember()">Add Member</button>
                        <button class="btn btn-secondary" id="cancelMemberBtn" onclick="cancelMemberEdit()" style="display: none;">Cancel</button>
                    </div>
                    
                    <!-- Members List -->
                    <div class="card">
                        <h2>Members (<span id="memberCount">0</span>)</h2>
                        <div id="membersListContainer" class="members-list"></div>
                    </div>
                </div>
            </div>

            <div id="admin-polls-page" class="page admin-page">
                <h1>Manage Polls</h1>
                <div class="admin-container">
                    <!-- Create Poll -->
                    <div class="card">
                        <h2>Create New Poll</h2>
                        <div class="form-group">
                            <label>Question</label>
                            <input type="text" id="pollQuestion" class="form-input" placeholder="What is your question?">
                        </div>
                        <div class="form-group">
                            <label>Options</label>
                            <div id="pollOptionsContainer">
                                <input type="text" class="form-input poll-option" placeholder="Option 1">
                                <input type="text" class="form-input poll-option" placeholder="Option 2">
                            </div>
                            <button class="btn btn-secondary btn-sm" onclick="addPollOption()">+ Add Option</button>
                        </div>
                        <button class="btn btn-primary" onclick="createPoll()">Create Poll</button>
                    </div>
                    
                    <!-- Polls List -->
                    <div class="card">
                        <h2>Active Polls</h2>
                        <div id="pollsListContainer"></div>
                    </div>
                </div>
            </div>

            <div id="admin-gallery-page" class="page admin-page">
                <h1>Manage Gallery</h1>
                <div class="admin-container">
                    <div class="card">
                        <h2>Upload Photos</h2>
                        <div class="form-group">
                            <label>Select Photos</label>
                            <input type="file" id="photoUpload" class="form-input" accept="image/*" multiple>
                        </div>
                        <div class="form-group">
                            <label>Event/Album Name</label>
                            <input type="text" id="photoAlbumName" class="form-input" placeholder="e.g., January 2025 Game">
                        </div>
                        <button class="btn btn-primary" onclick="uploadPhotos()">Upload Photos</button>
                    </div>
                    
                    <div class="card">
                        <h2>Manage Photos</h2>
                        <div id="adminGalleryGrid" class="gallery-grid"></div>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <!-- Firebase -->
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-database-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-storage-compat.js"></script>
    
    <!-- App Scripts -->
    <script src="firebase-config.js"></script>
    <script src="app.js"></script>
</body>
</html>

